<!DOCTYPE html>
<html lang="en">
   <head>
	  <link href="style.css" rel="stylesheet"/>
      <script src="https://www.gstatic.com/firebasejs/7.20.0/firebase-app.js"></script>
      <script src="https://www.gstatic.com/firebasejs/7.20.0/firebase-auth.js"></script>
      <meta charset="utf-8">
      <title>Authentication</title>
   </head>
   <body>
 
	  <div style="text-align: center">
	  <div class="form">
         <h2>Firebase Login</h2>
         <form id="clear">
			<br>
			<br>
			<p><b>Username<b></p>
			<p id="p4"> <input id="Username" type="Username"></p>
			<p><b>Email<b></p>
			 <p id="p1"> <input  id="email" type="email"></p>
			 <p><b>Password<b></p>
            <p id="p2"><input  id="password" type="password"></p>
            <input type="button" id="signup" value="SignUp" onclick="signUp()">
            <input type="button"  id="signin"value="SignIn" onclick="signIn()"> 
            <input type="button"  id="signout"value="SignOut" onclick="signOut()">
            <br><br>
				</form>
            <button  type="submit"  >Clear Page</button>
      </div>
	  <div class="pattern">
	  <button onclick="forgotPassword()">Forget password</button>
	  </div>
   </body>
  <script>
  document.getElementById('signout').style.display='none' ;
  
 // Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyDgDK-kBc5-RNu86Vp9Fh2M5kH7-4dNze8",
  authDomain: "login-and-signup-form-a4507.firebaseapp.com",
  projectId: "login-and-signup-form-a4507",
  storageBucket: "login-and-signup-form-a4507.appspot.com",
  messagingSenderId: "849544144252",
  appId: "1:849544144252:web:2632270943a61ff16170f9",
  measurementId: "G-41SPQEHDH7"
};
 // Initialize Firebase
 firebase.initializeApp(firebaseConfig);
 const auth = firebase.auth();

 auth.onAuthStateChanged(function() {
 var user = auth.currentUser;
 if (user) {
     alert("Active User " + user.email);
	 document.getElementById('signout').style.display='inline' ;
	 document.getElementById('signup').style.display='none' ;
	 document.getElementById('signin').style.display='none' ;
	  document.getElementById('p1').style.display='none' ;
	   document.getElementById('p2').style.display='none' ;
	  // document.getElementById('p3').style.display='inline' ;
	  //  document.getElementById('p3').innerHTML = "<b><i>Hello "+ user.email+"</i></b>";
  
 } else {
	  document.getElementById('signout').style.display='none' ;
	  document.getElementById('signup').style.display='inline' ;
	 document.getElementById('signin').style.display='inline' ;
	  document.getElementById('p1').style.display='inline' ;
	   document.getElementById('p2').style.display='inline' ;
	     //document.getElementById('p3').style.display='none';
 }
});

 function signUp() {
     var user = auth.currentUser;
     if (user) {
         alert("Already Logged in");
		 alert("Active User " + user.email);
	 document.getElementById('signout').style.display='inline' ;
	 document.getElementById('signup').style.display='none' ;
	 document.getElementById('signin').style.display='none' ;
	  document.getElementById('p1').style.display='none' ;
	   document.getElementById('p2').style.display='none' ;
	    //document.getElementById('p3').style.display='inline' ;
	   // document.getElementById('p3').innerHTML = "<b><i>Hello "+ user.Username+"</i></b>";
  
     } else {
         var email = document.getElementById("email");
         var password = document.getElementById("password");
         auth.createUserWithEmailAndPassword(email.value, password.value).catch(e => alert(e.message));
         alert("SignUp");
		   document.getElementById('signout').style.display='none' ;
	  document.getElementById('signup').style.display='inline' ;
	 document.getElementById('signin').style.display='inline' ;
	  document.getElementById('p1').style.display='inline' ;
	   document.getElementById('p2').style.display='inline' ;
	    document.getElementById('p2').style.display='inline' ;
	    // document.getElementById('p3').style.display='none';
     }
 }
 
 function signIn() {
     var user = auth.currentUser;
     var email = document.getElementById("email");
     var password = document.getElementById("password");
     if (!(user)) {
         auth.signInWithEmailAndPassword(email.value, password.value).catch(e => alert(e.message));
         alert("Signing in");
		  document.getElementById('signout').style.display='inline' ;
	 document.getElementById('signup').style.display='none' ;
	 document.getElementById('signin').style.display='none' ;
	  document.getElementById('p1').style.display='none' ;
	   document.getElementById('p2').style.display='none' ;
	   // document.getElementById('p3').style.display='inline' ;
	    //document.getElementById('p3').innerHTML = "<b><i>Hello "+ user.Username+"</i></b>";
     } else {
         alert("Already Logged in");
		  document.getElementById('signout').style.display='inline' ;
	 document.getElementById('signup').style.display='none' ;
	 document.getElementById('signin').style.display='none' ;
	  document.getElementById('p1').style.display='none' ;
	   document.getElementById('p2').style.display='none' ;
	   // document.getElementById('p3').style.display='inline' ;
	   // document.getElementById('p3').innerHTML = "<b><i>Hello "+ user.Username+"</i></b>";
     }
 }
 
 function signOut() {
     var user = auth.currentUser;
     if (user) {
         if (confirm(" Are you sure to SignOut?")) {
             auth.signOut().catch(e => alert(e.message));
             alert("Signed Out");
			  document.getElementById('signout').style.display='none' ;
	  document.getElementById('signup').style.display='inline' ;
	 document.getElementById('signin').style.display='inline' ;
	  document.getElementById('p1').style.display='inline' ;
	   document.getElementById('p2').style.display='inline' ;
	    document.getElementById('p3').style.display='none' ;
	    }
     } else {
         alert("No Active User to SignOut");
		  document.getElementById('signout').style.display='none' ;
	  document.getElementById('signup').style.display='inline' ;
	 document.getElementById('signin').style.display='inline' ;
	  document.getElementById('p1').style.display='inline' ;
	   document.getElementById('p2').style.display='inline' ;
	    document.getElementById('p3').style.display='none' ;
	    
     }
 }
 
 
 // document.getElementById('clear').addEventListener('submit', clear);
 
 function clear(e) {
     e.preventDefault();
     alert("Page Cleared");
     // document.getElementById('clear').reset();
 }

 function forgotPassword(){
 console.info("clikc");
   var emailAddress = prompt("Please enter your email", "example@xyz.com");

    firebase.auth().sendPasswordResetEmail(emailAddress).then(res=>{
        alert("mail sent")
     });
  if (emailAddress != null) {
    
    
  }
 }
 
  </script>


<style>
*
{
	background-image: url("bg.png");
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

.pattern
{
margin-top: -100px ! important;

}
}</style>